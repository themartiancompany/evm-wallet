#!/usr/bin/env node

const { ethers } = require(
  "ethers");
_ethers = ethers;
const _fs_utils = require(
  './fs-utils');

function _wallet_exists(
  _path) {
  if ( _fs_utils._file_exists(
         _path) == true ) {
    _msg = "ERROR: wallet '{_path}' already exists".replaceAll(
      '{_path}',
      _path);
    console.error(
      _msg);
    process.exit();
  }
}

function _wallet_get(
  _path,
  _password,
  _seed,
  _provider) {
  console.log(
    "[wallet-get] INFO: wallet path", _path);
  console.log(
    "[wallet-get] INFO: wallet password", _password);
  console.log(
    "[wallet-get] INFO: wallet seed", _seed);
  _wallet_exists(
    _path);
  _phrase = _fs_utils._file_read(
    _seed); 
  console.log(
    "[wallet-get] INFO seed phrase",
    _seed, ":",
      _phrase);
  _wallet = _ethers.HDNodeWallet.fromPhrase(
    _phrase,
    _provider);
  console.log(
    _wallet);
  return _wallet
}

module.exports = {
  _wallet_get: _wallet_get
};
